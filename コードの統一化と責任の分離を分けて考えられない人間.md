# コードの統一化と責任の分離を分けて考えよ

## 🎭 よくある勘違い：「クラス1つにまとめたほうが統一感あるでしょ？」

こういう思想の人が書くコードって、だいたいこうなります：

```cpp
class Hoge {
public:
    void run() {
        if (type_== A) {
            // A向けの処理
        } else if (type_ == B) {
            // B向けの処理
        }
        // さらに増える if...
    }

private:
    int type_;
};
```

- ✅ 一見「まとまって見える」けど
- ❌ 内部は実質 AとBの処理が並列に存在していて、凝集度ゼロ
- ❌ 新しい型Cが増えるたびに if 文が増える → 修正コスト増
- ❌ テストもメンテも破綻しがち（片方しか使わない関数も全部持ってる）
- ✅ 正しい「コードの統一化」の意味はこれ  
  - 共通部分は抽象化・インターフェース化し、差異は具象クラスに切り出す  
    → つまり 分けて、統一する。

### 👇 例：良いクラス設計の対比

```cpp
// 抽象インターフェース
class Hoge {
public:
    virtual void run() = 0;
};

// 具体クラスA
class HogeA : public Hoge {
public:
    void run() override {
        // A向けの実装
    }
};

// 具体クラスB
class HogeB : public Hoge {
public:
    void run() override {
        // B向けの実装
    }
};
```

- ✅ 責務が分かれていて明確
- ✅ テストしやすい
- ✅ 新しい型Cを追加しても他に影響しない
- ✅ if文での分岐も不要

## 🧠統一化の意味を履き違えてる

「コードを統一する」というのは、

“**1つのインターフェースで多様な振る舞いを扱えるようにする**”という意味であって、  
“**全部1つのクラスにねじ込む**”ことではないです。

もしかして、そういう実装を目にしましたか？

💬 こういう人との会話、どう進めると建設的か？

- ✅ 「統一」という言葉の意味を 「構造の統一」じゃなく「使い方の統一」にシフトさせて話す
- ✅ 「将来A/B/C/D/E…と増えた時にそのコードどうなる？」って問いかける
- ✅ 「そのクラス、クラス名と中身の責務一致してる？」って聞くと響きやすい
